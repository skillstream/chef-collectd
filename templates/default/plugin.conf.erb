#
# This file is generated by Chef
# Do not edit, changes will be overwritten
#
LoadPlugin "<%= @name %>"

<% k = nil, v = nil %>
<% if not @config.empty? %>
<Plugin "<%= @name %>">
  <%= "<Node \"#{node['hostname']}\">" if @name == "write_graphite" %>
  <%= "<URL #{collectd_option(@config.delete("URL"))}>" if @name == "write_http" %>
  <%= "<Server #{collectd_option(@config.delete("Server"))}>" if @name == "network" %>
  <% @config.each_pair do |key, value| %>
    <% if value.is_a? Array %>
      <% value.each do |subvalue| %>
        <%= key %> <%= collectd_option(subvalue) %>
      <% end %>
    <% elsif @name == "network" && key == "MaxPacketSize" %>
      <% k = key; v = collectd_option(value); %>
    <% else %>
      <%= key %> <%= collectd_option(value) %>
    <% end %>
  <% end %>
  <%= "</Node>" if @name == "write_graphite" %>
  <%= "</URL >" if @name == "write_http" %>
  <%= "</Server >" if @name == "network" %>
  <% if k && v %>
    <%= k %> <%= v %>
  <% end %>
</Plugin>
<% end %>
